<h1 *ngIf="!isLoggedIn">Log in to access this page</h1>
<div *ngIf="isLoggedIn">
  <mat-card class="box-shadow" *ngIf="dueBooks.length > 0" style="color: white; background: royalblue">
    <h2>Books due to return soon:</h2>
    <table mat-table class="table" [dataSource]="dueBooks">
      <ng-container matColumnDef="title">
        <th mat-header-cell *matHeaderCellDef> Title</th>
        <td mat-cell *matCellDef="let book"><p> {{book.title}} </p></td>
      </ng-container>


      <ng-container matColumnDef="authors">
        <th mat-header-cell *matHeaderCellDef> Authors</th>
        <td mat-cell *matCellDef="let book"><p *ngFor="let author of book.authors"> {{author}} </p></td>
      </ng-container>

      <ng-container matColumnDef="release date">
        <th mat-header-cell *matHeaderCellDef> Release date</th>
        <td mat-cell *matCellDef="let book"> {{book.releaseDate | date:'longDate'}} </td>
      </ng-container>

      <ng-container matColumnDef="renting date">
        <th mat-header-cell *matHeaderCellDef> Renting date</th>
        <td mat-cell *matCellDef="let book"> {{book.rentingDate | date:'longDate'}} </td>
      </ng-container>

      <ng-container matColumnDef="return date">
        <th mat-header-cell *matHeaderCellDef> Return date</th>
        <td mat-cell *matCellDef="let book"> {{book.returnDate | date:'longDate'}} </td>
      </ng-container>

      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let book">
          <button mat-raised-button (click)="returnBook(book.id)">RETURN</button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </mat-card>

  <mat-card class="box-shadow" *ngIf="rentedBooks.length > 0" style="color: white; background: royalblue">
    <h2>Rented books:</h2>
    <table class="table" mat-table [dataSource]="rentedBooks">
      <ng-container matColumnDef="title">
        <th mat-header-cell *matHeaderCellDef> Title</th>
        <td mat-cell *matCellDef="let book"><p> {{book.title}} </p></td>
      </ng-container>


      <ng-container matColumnDef="authors">
        <th mat-header-cell *matHeaderCellDef> Authors</th>
        <td mat-cell *matCellDef="let book"><p *ngFor="let author of book.authors"> {{author}} </p></td>
      </ng-container>

      <ng-container matColumnDef="release date">
        <th mat-header-cell *matHeaderCellDef> Release date</th>
        <td mat-cell *matCellDef="let book"> {{book.releaseDate | date:'longDate'}} </td>
      </ng-container>

      <ng-container matColumnDef="renting date">
        <th mat-header-cell *matHeaderCellDef> Renting date</th>
        <td mat-cell *matCellDef="let book"> {{book.rentingDate | date:'longDate'}} </td>
      </ng-container>

      <ng-container matColumnDef="return date">
        <th mat-header-cell *matHeaderCellDef> Return date</th>
        <td mat-cell *matCellDef="let book"> {{book.returnDate | date:'longDate'}} </td>
      </ng-container>

      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let book">
          <button mat-raised-button (click)="returnBook(book.id)">RETURN</button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </mat-card>

  <mat-card class="box-shadow" *ngIf="returnedBooks.length > 0" style="color: white; background: royalblue">
    <h2>Renting history:</h2>
    <table mat-table class="table" [dataSource]="returnedBooks">
      <ng-container matColumnDef="title">
        <th mat-header-cell *matHeaderCellDef> Title</th>
        <td mat-cell *matCellDef="let book"><p> {{book.title}} </p></td>
      </ng-container>


      <ng-container matColumnDef="authors">
        <th mat-header-cell *matHeaderCellDef> Authors</th>
        <td mat-cell *matCellDef="let book"><p *ngFor="let author of book.authors"> {{author}} </p></td>
      </ng-container>

      <ng-container matColumnDef="release date">
        <th mat-header-cell *matHeaderCellDef> Release date</th>
        <td mat-cell *matCellDef="let book"> {{book.releaseDate | date:'longDate'}} </td>
      </ng-container>

      <ng-container matColumnDef="renting date">
        <th mat-header-cell *matHeaderCellDef> Renting date</th>
        <td mat-cell *matCellDef="let book"> {{book.rentingDate | date:'longDate'}} </td>
      </ng-container>

      <ng-container matColumnDef="return date">
        <th mat-header-cell *matHeaderCellDef> Return date</th>
        <td mat-cell *matCellDef="let book"> {{book.returnDate | date:'longDate'}} </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumnsHist"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumnsHist;"></tr>
    </table>
  </mat-card>
</div>
